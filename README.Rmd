[![Build Status](https://travis-ci.org/mpadge/texttimetravel.svg?branch=master)](https://travis-ci.org/mpadge/texttimetravel)
[![Project Status: Active](http://www.repostatus.org/badges/latest/active.svg)](http://www.repostatus.org/#active)

# texttimetravel

Tools for analysing temporally structured text collections

## Installation

```{r, eval=FALSE}
devtools::install_github ('mpadge/texttimetravel')
```

---------------

## Usage

Load packages and a temporally-structured corpus to work with:

```{r load-real, echo = FALSE, message = FALSE}
devtools::load_all (".", export_all = FALSE)
library (quanteda)
dat <- data_corpus_inaugural
```
```{r load-print, eval = FALSE}
library (texttimetravel)
library (quanteda)
dat <- data_corpus_inaugural
#dat <- corpus_reshape (dat, to = "sentences") # if desired
```
([`data_corpus_inaugural`](https://quanteda.io/reference/data_corpus_inaugural.html)
is a sample corpus from [`quanteda`](https://quanteda.io) of inaugural speeches
of US presidents.) Then use [`quanteda`](https://quanteda.io) functions to
convert to desired tokenized form:
```{r tokenize}
tok <- tokens (dat,
               remove_numbers = TRUE,
               remove_punct = TRUE,
               remove_separators = TRUE)
tok <- tokens_remove (tok, stopwords("english"))
```


## keywords

Keyword associations can be extracted with the `ttt_keyness` function, which
relies on the `quanteda::keyness` function, yet simplifies the interface by
allowing keyness statistics to be extracted with a single function call.

```{r keywords}
x <- ttt_keyness (tok, "politic*")
head (x, n = 10) %>% knitr::kable()
x <- ttt_keyness (tok, "school")
head (x, n = 10) %>% knitr::kable()
```

Note that all words associated with "school" occur only once in the corpus, and
so even though `p = 0` in all cases, these associations can not be interpreted
as statistically meaningful.

## topics

The function `ttt_fit_topics` provides a convenient wrapper around the functions
provided by the
[`topicmodels`](https://cran.r-project.org/package=topicmodels) package, and
provides additional functionality via two additional parameters:

1. `years`, allowing topic models to be fitted only to those portions of a
   corpus corresponding to the specified years;
2. `topic`, allowing models to be fitted around a specified topic phrase.

```{r topics}
x <- ttt_fit_topics (tok, ntopics = 5)
topicmodels::get_terms(x, 10) %>% knitr::kable()
x <- ttt_fit_topics (tok, years = 1789:1900, ntopics = 5)
topicmodels::get_terms(x, 10) %>% knitr::kable()
x <- ttt_fit_topics (tok, topic = "nation", ntopics = 5)
topicmodels::get_terms(x, 10) %>% knitr::kable()
```

